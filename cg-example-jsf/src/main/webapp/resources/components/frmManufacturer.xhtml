<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:app="http://java.sun.com/jsf/composite/components"
    xmlns:p="http://primefaces.org/ui">
   
	<cc:interface>
		<cc:attribute name="frm" required="true" type="com.github.cg.example.jsf.controller.frm.FrmManufacturer" />
	</cc:interface>

	<cc:implementation>
		<app:frm id="frm" frm="#{cc.attrs.frm}">
			<p:tabView id="tbView">
				<p:tab id="tabManufacturer" title="Manufacturer">
					<h:panelGrid columns="3" cellpadding="5" style="width: 100%">
						<p:outputLabel value="Id" for="id" />
						<p:inputText id="id" label="Id" value="#{cc.attrs.frm.entity.id}" disabled="true" />
						<p:message for="id" display="icon" />		
						
						<p:outputLabel value="Version" for="version" />
						<p:inputText id="version" label="Version" value="#{cc.attrs.frm.entity.version}" disabled="true" />
						<p:message for="version" display="icon" />

						<p:outputLabel value="Name:" for="name" />
						<p:inputText id="name" label="Name" value="#{cc.attrs.frm.entity.name}" required="true" style="width: 100px" />
						<p:message for="name" display="icon" />

						<p:outputLabel value="E-Mail:" for="email" />
						<p:inputText id="email" label="E-Mail" value="#{cc.attrs.frm.entity.email}" required="true" style="width: 100px" />
						<p:message for="email" display="icon" />

						<p:outputLabel value="Phone:" for="phone" />
						<p:inputText id="phone" label="Phone" value="#{cc.attrs.frm.entity.phone}" required="true" style="width: 100px" />
						<p:message for="phone" display="icon" />
					</h:panelGrid>
				</p:tab>

				<p:tab id="tabModels" title="Models">
					<p:dataTable
						id="dtModels"
						emptyMessage="None Model found."
						value="#{cc.attrs.frm.entity.models}"
						var="association">
						
						<p:column headerText="Id" sortBy="#{association.id}" filterBy="#{association.id}">
							<h:outputText value="#{association.id}" />
						</p:column>

						<p:column headerText="Name" sortBy="#{association.name}" filterBy="#{association.name}">
							<h:outputText value="#{association.name}" />
						</p:column>

						<p:column headerText="Description" sortBy="#{association.description}" filterBy="#{association.description}">
							<h:outputText value="#{association.description}" />
						</p:column>

						<p:column headerText="Year" sortBy="#{association.year}" filterBy="#{association.year}">
							<h:outputText value="#{association.year}" />
						</p:column>

						<p:column headerText="Price" sortBy="#{association.price}" filterBy="#{association.price}">
							<h:outputText value="#{association.price}">
								<f:convertNumber locale="#{localeCtrl.locale}" type="currency" />
							</h:outputText>
						</p:column>

						<p:column headerText="Classification" sortBy="#{association.classification}" filterBy="#{association.classification}">
							<h:outputText value="#{association.classification.description}" />
						</p:column>

						<p:column styleClass="col-action">
							<p:button 
								outcome="/pages/model/modelView.jsf" 
								title="View Model" 
								icon="ui-icon-zoomin">
								<f:param name="id" value="#{association.id}" />
							</p:button>					

							<p:button 
								outcome="/pages/model/modelEdit.jsf" 
								title="Edit Model." 
								icon="ui-icon-pencil"
								target="_blank">
								<f:param name="id" value="#{association.id}" />
							</p:button>
						
 							<p:commandButton 
 								action="#{cc.attrs.frm.subFrmModels.startDelete(association)}" 
 								process="@this" 
 								title="Delete Model" 
 								icon="ui-icon-trash" />
						</p:column>						

						<f:facet name="footer">
				        	<p:outputPanel layout="block" styleClass="action-left">				        		
				        		<p:button
				        			outcome="/pages/model/modelEdit.jsf"
				        			disabled="#{cc.attrs.frm.inserting}"	 
				        			title="New Model"
				        			icon="ui-icon-document"
				        			target="_blank"
				        			value="New Model">
				        		</p:button>
							</p:outputPanel>
				        </f:facet>
					</p:dataTable>
					
					<app:dlgSubFrmDelete 
						subFrm="#{cc.attrs.frm.subFrmModels}"
						title="Delete Model?" 
						message="Are you sure to delete this Model?" />
				</p:tab>
			</p:tabView>
		</app:frm>
	</cc:implementation>
</html>
